<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:p="http://primefaces.org/ui">
    <h:head><title>User Management</title></h:head>
    <h:body>
        <h:form id="userForm">
            <p:panel header="User Details">
                <p:panelGrid columns="2">
                    <h:outputLabel value="Username:" />
                    <p:inputText value="#{userBean.currentUser.username}" />
                    
                    <h:outputLabel value="Email:" />
                    <p:inputText value="#{userBean.currentUser.email}" />
                    
                    <h:outputLabel value="Role:" />
                    <p:selectOneMenu value="#{userBean.currentUser.role}">
                        <f:selectItem itemLabel="Admin" itemValue="ADMIN" />
                        <f:selectItem itemLabel="User" itemValue="USER" />
                    </p:selectOneMenu>
                </p:panelGrid>
                <p:commandButton value="Save" action="#{userBean.saveUser}" update="userTable" />
            </p:panel>

            <p:dataTable id="userTable" value="#{userBean.users}" var="u">
                <p:column headerText="Name">#{u.username}</p:column>
                <p:column headerText="Email">#{u.email}</p:column>
                <p:column headerText="Role">#{u.role}</p:column>
                <p:column headerText="Actions">
                    <p:commandButton value="Delete" action="#{userBean.deleteUser(u)}" update="userTable" />
                </p:column>
            </p:dataTable>
        </h:form>
    </h:body>
</html>
